# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "4.5.0"
  python_check_max: "3.14"

package:
  name: robotframework-pythonlibcore
  version: ${{ version }}

source:
  - target_directory: dist
    url: https://pypi.org/packages/source/r/robotframework-pythonlibcore/robotframework_pythonlibcore-${{ version }}.tar.gz
    sha256: 54ad47c592b2959bffe865e006fd4517f3c46dfb9df5b68a3f335ab842ab065e
  - target_directory: src
    url: https://github.com/robotframework/PythonLibCore/archive/refs/tags/v${{ version }}.tar.gz
    sha256: 54ad47c592b2959bffe865e006fd4517f3c46dfb9df5b68a3f335ab842ab065e

build:
  number: 0
  noarch: python
  script:
    - cd dist
    - ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation --disable-pip-version-check

requirements:
  host:
    - pip
    - python ${{ python_min }}.*
    - setuptools
  run:
    - python >=${{ python_min }}

tests:
  - python:
      imports: robotlibcore
      pip_check: true
      python_version:
        - ${{ python_min }}.*
        - ${{ python_check_max }}.*
  - files:
      source:
        - src/utest
    requirements:
      run:
        - pytest-cov
        - python ${{ python_min }}.*
        - robotframework
    script:
      - cd src/utest
      - coverage run --source=robotlibcore --branch -m pytest --tb=long --color=yes
      - coverage report --show-missing --skip-covered --fail-under=100

about:
  summary: Tools to ease creating larger test libraries for Robot Framework using Python.
  license: Apache-2.0
  license_file:
    - dist/LICENSE.txt
    - dist/COPYRIGHT.txt
  description: |-
    The Robot Framework hybrid and dynamic library API gives more flexibility for
    library than the static library API, but they also sets requirements for
    libraries which needs to be implemented in the library side. PythonLibCore
    eases the problem by providing simpler interface and handling all the
    requirements towards the Robot Framework library APIs.


  homepage: https://github.com/robotframework/PythonLibCore

extra:
  recipe-maintainers:
    - bollwyvl
    - martinRenou
